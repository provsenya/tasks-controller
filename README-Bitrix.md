# Компонент Bitrix

Компонент можно разместить в каталоге /local/components/crm/tasks_list.

Структура компонента следующая:

(вставка с документации)
<img width="799" height="349" alt="image" src="https://github.com/user-attachments/assets/7236398d-3bad-44a4-b9de-7d42a5090a7b" />

## Фунциональная логика - class.php

Основной файл class.php содержал бы логику из моего index.php:
прописывается класс, наследуемый от CBitrixComponent, в котором выполняется подключение к MySQL и выборка данных
```
Например, при вызове компонента он подключается к базе MySQL с помощью mysqli (либо через dbconn.php, где уже лежат параметры подключения),
делает запрос к таблице tasks и передает результаты в шаблон через $arResult
```

1) Внутри него реализуется метод executeComponent(), который вызывается автоматически при подключении компонента,
там описывается всё, что компонент делает: подключение к базе, выборка данных, подготовка массива $arResult и передача его в шаблон

2) Проверяем соединение и в случае ошибки выводим сообщение через ShowError()

3) Выполняем SQL-запрос ```SELECT * FROM tasks ORDER BY created_at DESC```

4) Результаты запроса записываем в массив $arResult['TASKS']

5) Подключаем шаблон компонента includeComponentTemplate()

## Шаблон - template.php

Это файл, который отвечает только за отображение данных,
он получает на вход массив $arResult из класса и формирует HTML-разметку

- В шаблоне выводилась бы таблица задач, выпадающий фильтр, кнопка «Добавить задачу» и модальное окно для добавления новой задачи
  HTML-разметка полностью повторяла бы текущую версию, только данные брались бы из $arResult

## Описание компонента - description.php

Здесь указывается информация о компоненте: название, описание, категория, автор, 
после чего компонент появляется в панели администратора Bitrix и может быть добавлен через визуальный редактор

## Добавление компонента на страницу

После регистрации компонента его можно было бы вставить на любую страницу сайта Bitrix:
```
$APPLICATION->IncludeComponent("crm:tasks_list", "", []);
```
 (в нашем случае)





